#+TITLE: Emacs 功能与快捷键指南
#+AUTHOR: vitamin-k
#+DATE: [2024-03-01]

* 基础配置
** 界面设置
- 关闭启动画面、工具栏、菜单栏和滚动条
- 使用 UTF-8 编码
- 备份文件存储在 =~/.emacs.d/backups=

** 包管理
- 使用 Git Submodule 管理包
- 通过 =use-package= 进行包配置

** 补全系统
*** Vertico/Consult/Orderless
- 使用 Vertico 提供垂直补全界面
- Consult 增强搜索和浏览功能
- Orderless 提供灵活的补全匹配方式

*** Marginalia 注解
- 在minibuffer中为补全候选项提供丰富的注解信息
- 显示命令的简短描述、文件属性、变量值等
- 使用 =M-A= 可以循环切换注解的详细程度
- 与Vertico和Consult无缝集成，增强用户体验

*** 快捷键
| 功能               | 快捷键    |
|--------------------+-----------|
| 行内搜索           | C-s       |
| 历史记录           | C-r       |
| 粘贴历史           | M-y       |
| 缓冲区切换         | C-x b     |
| 文件查找           | C-c f     |
| 切换注解详细程度   | M-A       |

* Org-mode 功能
** 基本设置
- 美化标题显示（不同级别标题使用不同大小）
- 启用缩进模式，使层次结构更清晰
- 隐藏强调标记，使文档更整洁

** 快捷键
| 功能         | 快捷键    |
|--------------+-----------|
| 创建标题     | M-RET     |
| 调整标题级别 | M-LEFT/RIGHT |
| 移动标题     | M-UP/DOWN |
| 切换待办状态 | C-c C-t   |
| 插入链接     | C-c C-l   |

** Org Babel
- 支持 Emacs Lisp 和 Shell 代码块
- 自动生成 config.el（保存 config.org 时）

* PDF 工具
** 功能
- 使用 pdf-tools 查看 PDF 文件
- 支持注释、大纲和同步功能
- 与 Org-mode 集成，支持 LaTeX 导出为 PDF

** 快捷键
| 功能         | 快捷键    |
|--------------+-----------|
| 放大/缩小    | C-+/C--   |
| 页面导航     | n/p       |
| 显示大纲     | o         |
| 搜索文本     | C-s       |
| 添加注释     | C-c C-a   |

* 数学研究笔记系统
** Org-Roam 知识库
- 构建个人知识库，支持双向链接
- 专为数学研究设计的笔记模板
- 自动创建必要的目录结构

** 快捷键
| 功能         | 快捷键    |
|--------------+-----------|
| 查找笔记     | C-c n f   |
| 插入链接     | C-c n i   |
| 创建笔记     | C-c n c   |
| 显示后端面板 | C-c n l   |

** LaTeX 和数学公式
- 使用 CDLaTeX 增强数学公式输入
- 自定义数学符号和环境模板
- 支持文献管理和引用

** 快捷键
| 功能         | 快捷键    |
|--------------+-----------|
| 插入数学符号 | ` + 字符  |
| 创建环境     | C-c C-e   |
| 插入引用     | 通过 org-ref |

** AI 辅助工具
- 集成大语言模型（DeepSeek、OpenAI 等）
- 专为数学研究定制的 AI 提示模板
- 快速生成解释、证明和求解

** 快捷键
| 功能         | 快捷键    |
|--------------+-----------|
| AI 解释数学  | C-c a e   |
| AI 生成证明  | C-c a p   |
| AI 求解 PDE  | C-c a s   |
| AI 对话      | C-c a c   |
| AI 提示      | C-c a i   |
| 插入数学符号 | ` + 字符  |
| 创建环境     | C-c C-e   |
| 插入引用     | 通过 org-ref |

* 综合快捷键菜单 (Hydra)
** 数学笔记菜单
- 按 =C-c m= 调出数学笔记操作菜单

| 类别     | 按键 | 功能         |
|----------+------+--------------|
| 笔记操作 | f    | 查找笔记     |
|          | i    | 插入链接     |
|          | t    | 添加标签     |
|          | d    | 日常笔记     |
| 公式     | e    | 编辑公式     |
|          | n    | 新公式块     |
|          | a    | 对齐环境     |
|          | s    | 插入符号     |
| 引用     | c    | 插入引用     |
|          | b    | 打开文献     |
|          | r    | 刷新文献     |
|          | p    | 预览 PDF     |
| AI 辅助  | E    | AI 解释      |
|          | P    | AI 证明      |
|          | S    | AI 求解 PDE  |
|          | C    | AI 对话      |

* Org-Capture 模板
- 快速捕获各类信息的模板

| 快捷键  | 模板类型   | 目标文件                    |
|---------+------------+-----------------------------|
| C-c c t | 待办事项   | ~/org-roam/gtd.org          |
| C-c c n | 研究笔记   | ~/org-roam/research_notes.org |
| C-c c j | 研究日志   | ~/org-roam/research_journal.org |
| C-c c i | 研究想法   | ~/org-roam/research_ideas.org |

* Meow 模态编辑
** 基本操作模式
- 提供类似 Vim 的模态编辑体验，但设计更符合 Emacs 哲学
- 四种主要模式：普通模式(N)、插入模式(I)、移动模式(M)和键盘模式(K)
- 通过光标形状直观显示当前模式（方块、竖线、空心、特殊）
- 为 macOS 特别优化的键位布局

** ace-pinyin 中文跳转
- 支持使用拼音首字母快速跳转到中文字符
- 基于 avy 实现，提供高效的光标定位
- 在普通模式下使用 =v= 键触发双字符跳转，=V= 键触发行内跳转

** 模式切换
| 功能         | 快捷键    |
|--------------+-----------|
| 进入插入模式 | i         |
| 进入普通模式 | ESC       |
| 进入移动模式 | SPC       |
| 取消选择     | g         |

** 普通模式快捷键
| 功能         | 快捷键    |
|--------------+-----------|
| 光标移动     | h/j/k/l   |
| 单词移动     | b/e       |
| 符号移动     | B/E       |
| 行首/行尾    | [/]       |
| 查找字符     | f/t       |
| 双字符跳转   | v         |
| 行内字符跳转 | V         |
| 删除         | d/D       |
| 修改         | c         |
| 复制         | y         |
| 粘贴         | p         |
| 撤销         | u         |
| 选择单词     | w         |
| 选择符号     | W         |
| 选择行       | x         |

** Leader 键功能 (SPC)
| 功能         | 快捷键    |
|--------------+-----------|
| 打开文件     | SPC f     |
| 切换缓冲区   | SPC b     |
| 保存文件     | SPC w     |
| 关闭缓冲区   | SPC k     |
| 打开目录     | SPC d     |
| 垂直分割窗口 | SPC v     |
| 水平分割窗口 | SPC h     |
| 查看帮助     | SPC ?     |

** macOS 特殊集成
- Command 键映射为 Meta
- Option 键映射为 Super
- 右侧 Option 键保留原功能，用于输入特殊字符
- 为不同模式（如 PDF 查看、Dired、Org）设置了专用的初始状态